<!doctype html>
<html ng-app="ChatPiApp">

<head>
  <title>App | ChatPi</title>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="A cheap and portable chat server">
  <!-- Bootstrap core CSS -->
  <link href="../style/bootstrap.min.css" rel="stylesheet">
  <link href="../style/bootstrap-theme.min.css" rel="stylesheet">
  <link rel="stylesheet" href="../style/app.css">
  <link href='http://fonts.googleapis.com/css?family=Roboto:400,700' rel='stylesheet' type='text/css'>
  <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
  <![endif]-->
</head>

<body>
  <nav class="navbar navbar-inverse navbar-static-top">
    <div class="container">
      <div class="navbar-header">
        <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
          <span class="sr-only">Toggle navigation</span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="#">ChatPi</a>
      </div>
      <div id="navbar" class="collapse navbar-collapse">
        <ul class="nav navbar-nav navbar-right">
          <li><a href="/logout/">Logout</a>
          </li>
        </ul>
      </div>
      <!--/.nav-collapse -->
    </div>
  </nav>

  <div class="container-fluid" id="container-middle-pane" ng-controller="Conversation">
    <div class="row">
      <div class="col-sm-2" id="left-pane">

      </div>

      <div class="col-sm-8" id="middle-pane">

        <ul id="conversation">
          <li class="message" ng-repeat="message in conversation.message_history track by $index">
            <div class="sender-avatar">
              <img src="//lh4.googleusercontent.com/-_TiwxWC9EgY/VBD9frjAOSI/AAAAAAAAE5U/JuwptIUcLU8/s929-no/profile%2Bpic.jpg"/>
            </div>
            <pre class="message-contents">{{message}}
              <time class="message-date" datetime="2009-11-13T20:00">Serj Babayan â€¢ 51 min</time>
            </pre>

          </li>
        </ul>

        <form id="send-form" novalidate>
          <div class="input-group">
            <textarea ng-model="conversation.new_message" autocomplete="off" type="text" id="message-text-input" class="form-control" aria-label="Type your Message Here" placeholder="Type your Message Here" required autofocus></textarea>
            <div class="input-group-btn">
              <button ng-click="send()" class="btn btn-default">Send</button>
              <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-expanded="false">
                <span class="caret"></span>
                <span class="sr-only">Toggle Dropdown</span>
              </button>
              <ul class="dropdown-menu dropdown-menu-right" role="menu">
                <li><a href="#">Send a File</a>
                </li>
                <li><a href="#">Send a Text Snippet</a>
                </li>
              </ul>
            </div>

          </div>
        </form>
      </div>
      <div class="col-sm-2" id="right-pane">

      </div>
    </div>
  </div>
  <script src="../scripts/socket.io.client.js"></script>
  <script src="../scripts/angular.min.js"></script>
  <script src="../scripts/jquery.min.js"></script>
  <script src="../scripts/jquery.cookie.js"></script>
  <script src="../scripts/bootstrap.min.js"></script>
  <script charset="utf-8">
    //setting cookie required for authorization needed for the chat service
    $.cookie("socketID", "<%= sessionID %>", {
      expires: 7
    });
    var socket = io();
    socket.emit('session', $.cookie("socketID"));
  </script>
  <script charset="utf-8" src="../scripts/client.js"></script>

</body>

</html>
